<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ez="http://xmlns.jcp.org/jsf/composite/ezcomp">

    <h:head>
        <title>KrakEE</title>
    </h:head>

    <h:body>
        <h:outputStylesheet name="style.css" />
        <f:view>
            <h:form>
                <ez:globalMenu/>
            </h:form>

            <h:form id="form1">
                <p:panel>
                    <p:panelGrid columns="5">
                        <p:outputLabel value="StartDate:"/>
                        <p:calendar value="#{candleDetailBean.selectedDate}" mindate="#{candleDetailBean.minDate}" 
                                    maxdate="#{candleDetailBean.maxDate}" pages="3"  >
                            <p:ajax event="dateSelect"  update="timeList"/>
                        </p:calendar>

                        <p:outputLabel value="Time:"/>     
                        <p:selectOneMenu value="#{candleDetailBean.selectedIdHexa}" id="timeList">
                            <f:selectItem itemLabel="-" itemValue=""/>
                            <f:selectItems value="#{candleDetailBean.candleList}" var="candle" 
                                           itemLabel="#{candle.startDate}" itemValue="#{candle.idHexa}" />
                            <p:ajax event="itemSelect"  update="detailPanel, addBtn"/>
                        </p:selectOneMenu>

                        <p:commandButton value="+Learn" action="#{candleDetailBean.onNewLearn()}"
                                         disabled="#{candleDetailBean.selectedCandle eq true}"
                                         id="addBtn" oncomplete="PF('dlg').show();" update="learnDialog"/>
                    </p:panelGrid>
                </p:panel>   

                <p:dialog header="Learn" widgetVar="dlg" modal="true" id="learnDialog">
                    <p:panel>
                        <p:panelGrid columns="2">
                            <p:outputLabel value="Name:"/>
                            <p:autoComplete value="#{candleDetailBean.learnDetail.name}" 
                                            completeMethod="#{candleDetailBean.complete}"/>

                            <p:outputLabel value="Trade:"/>
                            <p:selectOneRadio  value="#{candleDetailBean.learnDetail.trade}">
                                <f:selectItem itemLabel="Buy" itemValue="b"/>
                                <f:selectItem itemLabel="Sell" itemValue="s"/>
                            </p:selectOneRadio>                             
                        </p:panelGrid>
                    </p:panel>

                    <p:panel>        
                        <p:commandButton value="Delete" action="#{candleDetailBean.onDeleteLearn()}" 
                                         oncomplete="PF('dlg').hide()" update="tbl"
                                         disabled="#{candleDetailBean.insertLearn}" />
                        <p:commandButton value="Save" action="#{candleDetailBean.onSaveLearn()}" 
                                         oncomplete="PF('dlg').hide()" update="tbl"/>
                        <p:commandButton value="Close" oncomplete="PF('dlg').hide()"/>
                    </p:panel>
                </p:dialog>

                <p:panel id="detailPanel">                
                    <p:panelGrid columns="8">
                        <p:outputLabel value="StartDate"/>
                        <p:outputLabel value="#{candleDetailBean.detail.startDate}"/>

                        <p:outputLabel value="CalcCandle"/>
                        <p:selectBooleanCheckbox value="#{candleDetailBean.detail.calcCandle}"/>

                        <p:outputLabel value="CalcDelta"/>
                        <p:selectBooleanCheckbox value="#{candleDetailBean.detail.delta.calcDelta}"/>                        

                        <p:outputLabel value="CalcBollinger"/>
                        <p:selectBooleanCheckbox value="#{candleDetailBean.detail.bollinger.calcBollinger}"/>                                                
                    </p:panelGrid>

                    <p:panelGrid columns="2" columnClasses="alignTop,alignTop">

                        <p:panelGrid columns="5">
                            <p:outputLabel value=""/>
                            <p:outputLabel value="Trade" style="font-weight: bold"/>
                            <p:outputLabel value="Delta" style="font-weight: bold"/>
                            <p:outputLabel value="Trend Up" style="font-weight: bold"/>
                            <p:outputLabel value="Trend Down" style="font-weight: bold"/>

                            <p:outputLabel value="Open" style="font-weight: bold"/>
                            <p:outputLabel value="#{candleDetailBean.detail.open}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.delta.deltaOpen}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.delta.trendOpenUp}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.delta.trendOpenDown}"/>

                            <p:outputLabel value="Low" style="font-weight: bold"/>                    
                            <p:outputLabel value="#{candleDetailBean.detail.low}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.delta.deltaLow}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.delta.trendLowUp}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.delta.trendLowDown}"/>

                            <p:outputLabel value="High" style="font-weight: bold"/>                    
                            <p:outputLabel value="#{candleDetailBean.detail.high}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.delta.deltaHigh}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.delta.trendHighUp}"/>                        
                            <p:outputLabel value="#{candleDetailBean.detail.delta.trendHighDown}"/>

                            <p:outputLabel value="Close" style="font-weight: bold"/>
                            <p:outputLabel value="#{candleDetailBean.detail.close}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.delta.deltaClose}"/>                        
                            <p:outputLabel value="#{candleDetailBean.detail.delta.trendCloseUp}"/>                        
                            <p:outputLabel value="#{candleDetailBean.detail.delta.trendCloseDown}"/>                        

                            <p:outputLabel value="Count" style="font-weight: bold"/>
                            <p:outputLabel value="#{candleDetailBean.detail.count}"/>                        
                            <p:outputLabel value="#{candleDetailBean.detail.delta.deltaCount}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.delta.trendCountUp}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.delta.trendCountDown}"/>


                            <p:outputLabel value="CountBuy" style="font-weight: bold"/>
                            <p:outputLabel value="#{candleDetailBean.detail.countBuy}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.delta.deltaCountBuy}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.delta.trendCountBuyUp}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.delta.trendCountBuyDown}"/>

                            <p:outputLabel value="CountSell" style="font-weight: bold"/>
                            <p:outputLabel value="#{candleDetailBean.detail.countSell}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.delta.deltaCountSell}"/>                        
                            <p:outputLabel value="#{candleDetailBean.detail.delta.trendCountSellUp}"/>                        
                            <p:outputLabel value="#{candleDetailBean.detail.delta.trendCountSellDown}"/>                                                


                            <p:outputLabel value="Volume" style="font-weight: bold"/>
                            <p:outputLabel value="#{candleDetailBean.detail.volume}">
                                <f:convertNumber maxFractionDigits="4" groupingUsed="false" />
                            </p:outputLabel>
                            <p:outputLabel value="#{candleDetailBean.detail.delta.deltaVolume}">
                                <f:convertNumber maxFractionDigits="4" groupingUsed="false" />
                            </p:outputLabel>
                            <p:outputLabel value="#{candleDetailBean.detail.delta.trendVolumeUp}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.delta.trendVolumeDown}"/>

                            <p:outputLabel value="VolumeBuy" style="font-weight: bold"/>
                            <p:outputLabel value="#{candleDetailBean.detail.volumeBuy}">
                                <f:convertNumber maxFractionDigits="4" groupingUsed="false" />
                            </p:outputLabel>
                            <p:outputLabel value="#{candleDetailBean.detail.delta.deltaVolumeBuy}">
                                <f:convertNumber maxFractionDigits="4" groupingUsed="false" />
                            </p:outputLabel>
                            <p:outputLabel value="#{candleDetailBean.detail.delta.trendVolumeBuyUp}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.delta.trendVolumeBuyDown}"/>


                            <p:outputLabel value="VolumeSell" style="font-weight: bold"/>
                            <p:outputLabel value="#{candleDetailBean.detail.volumeSell}">
                                <f:convertNumber maxFractionDigits="4" groupingUsed="false" />
                            </p:outputLabel>
                            <p:outputLabel value="#{candleDetailBean.detail.delta.deltaVolumeSell}">
                                <f:convertNumber maxFractionDigits="4" groupingUsed="false" />
                            </p:outputLabel>
                            <p:outputLabel value="#{candleDetailBean.detail.delta.trendVolumeSellUp}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.delta.trendVolumeSellDown}"/>

                            <p:outputLabel value="Total" style="font-weight: bold"/>
                            <p:outputLabel value="#{candleDetailBean.detail.total}">
                                <f:convertNumber maxFractionDigits="0" groupingUsed="false" />
                            </p:outputLabel>
                            <p:outputLabel value="#{candleDetailBean.detail.delta.deltaTotal}">
                                <f:convertNumber maxFractionDigits="0" groupingUsed="false" />
                            </p:outputLabel>
                            <p:outputLabel value="#{candleDetailBean.detail.delta.trendTotalUp}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.delta.trendTotalDown}"/>

                            <p:outputLabel value="TotalBuy" style="font-weight: bold"/>
                            <p:outputLabel value="#{candleDetailBean.detail.totalBuy}">
                                <f:convertNumber maxFractionDigits="0" groupingUsed="false" />
                            </p:outputLabel>
                            <p:outputLabel value="#{candleDetailBean.detail.delta.deltaTotalBuy}">
                                <f:convertNumber maxFractionDigits="0" groupingUsed="false" />
                            </p:outputLabel>
                            <p:outputLabel value="#{candleDetailBean.detail.delta.trendTotalBuyUp}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.delta.trendTotalBuyDown}"/>


                            <p:outputLabel value="TotalSell" style="font-weight: bold"/>
                            <p:outputLabel value="#{candleDetailBean.detail.totalSell}">
                                <f:convertNumber maxFractionDigits="0" groupingUsed="false" />
                            </p:outputLabel>
                            <p:outputLabel value="#{candleDetailBean.detail.delta.deltaTotalSell}">
                                <f:convertNumber maxFractionDigits="0" groupingUsed="false" />
                            </p:outputLabel>
                            <p:outputLabel value="#{candleDetailBean.detail.delta.trendTotalSellUp}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.delta.trendTotalSellDown}"/>

                            <p:outputLabel value="Simple Moving Average (Close20)" style="font-weight: bold"/>
                            <p:outputLabel value="#{candleDetailBean.detail.bollinger.sma}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.bollinger.deltaSma}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.bollinger.trendSmaUp}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.bollinger.trendSmaDown}"/>

                            <p:outputLabel value="Standard Deviation" style="font-weight: bold"/>
                            <p:outputLabel value="#{candleDetailBean.detail.bollinger.stDev}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.bollinger.deltaStDev}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.bollinger.trendStDevUp}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.bollinger.trendStDevDown}"/>                    

                            <p:outputLabel value="Bollinger Upper" style="font-weight: bold"/>
                            <p:outputLabel value="#{candleDetailBean.detail.bollinger.bollingerUpper}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.bollinger.deltaBollingerUpper}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.bollinger.trendBollingerUpperUp}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.bollinger.trendBollingerUpperDown}"/>                    

                            <p:outputLabel value="Bollinger Lower" style="font-weight: bold"/>
                            <p:outputLabel value="#{candleDetailBean.detail.bollinger.bollingerLower}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.bollinger.deltaBollingerLower}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.bollinger.trendBollingerLowerUp}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.bollinger.trendBollingerLowerDown}"/>                    

                            <p:outputLabel value="Trade Upper" style="font-weight: bold"/>
                            <p:outputLabel value="#{candleDetailBean.detail.bollinger.tradeUpper}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.bollinger.deltaTradeUpper}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.bollinger.trendTradeUpperUp}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.bollinger.trendTradeUpperDown}"/>                    

                            <p:outputLabel value="Trade Lower" style="font-weight: bold"/>
                            <p:outputLabel value="#{candleDetailBean.detail.bollinger.tradeLower}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.bollinger.deltaTradeLower}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.bollinger.trendTradeLowerUp}"/>
                            <p:outputLabel value="#{candleDetailBean.detail.bollinger.trendTradeLowerDown}"/>                                            

                        </p:panelGrid>

                        <p:panel>
                            <p:panel header="Learn">
                                <p:dataTable tableStyle="width:auto" id="tbl" value="#{candleDetailBean.learnList}" 
                                             var="item" editable="true">
                                    <p:column headerText="Name">
                                        <p:commandLink value="#{item.name}" 
                                                       action="#{candleDetailBean.showLearnDetail(item)}" 
                                                       oncomplete="PF('dlg').show();"
                                                       update=":form1:learnDialog"/>
                                    </p:column>
                                    <p:column headerText="Trade">
                                        <p:outputLabel value="#{item.tradeName}"/>  
                                    </p:column>  
                                </p:dataTable>
                            </p:panel>

                            <p:panelGrid columns="2">
                                <p:outputLabel value="Season" style="font-weight: bold"/>
                                <p:outputLabel value="#{candleDetailBean.detail.calendar.season}"/>

                                <p:outputLabel value="Month" style="font-weight: bold"/>
                                <p:outputLabel value="#{candleDetailBean.detail.calendar.month}"/>

                                <p:outputLabel value="Day" style="font-weight: bold"/>
                                <p:outputLabel value="#{candleDetailBean.detail.calendar.day}"/>

                                <p:outputLabel value="Week" style="font-weight: bold"/>
                                <p:outputLabel value="#{candleDetailBean.detail.calendar.week}"/>

                                <p:outputLabel value="DayOfWeek" style="font-weight: bold"/>
                                <p:outputLabel value="#{candleDetailBean.detail.calendar.dayOfWeek}"/>

                                <p:outputLabel value="JulianDate" style="font-weight: bold"/>
                                <p:outputLabel value="#{candleDetailBean.detail.calendar.julianDate}"/>

                                <p:outputLabel value="MoonAge" style="font-weight: bold"/>
                                <p:outputLabel value="#{candleDetailBean.detail.calendar.moonAge}"/>                       
                            </p:panelGrid>
                        </p:panel> 
                    </p:panelGrid>
                </p:panel> 
            </h:form>
        </f:view>                
    </h:body>
</html>


